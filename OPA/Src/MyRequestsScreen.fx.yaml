MyRequestsScreen As screen:
    BackgroundImage: =lightblue3

    Image4_3 As image:
        Height: =1620
        Image: =gradient_color_blue_155118_1600x900
        ImagePosition: =ImagePosition.Fill
        Width: =2160
        ZIndex: =1

    Rectangle2_4 As rectangle:
        BorderColor: =RGBA(255, 255, 255, 1)
        BorderThickness: =2
        Fill: =RGBA(50, 86, 160, 0.35)
        Height: =134
        Width: =2160.00
        X: =0.00
        ZIndex: =2

    Image3_4 As image:
        Height: =134
        Image: ='house-1.1s-200px (5)'
        OnSelect: |-
            =Navigate(Main);
            Set(cancelVar, false);
            Set(galleryvisVar, false)
        PaddingRight: =0.00
        PaddingTop: =0.00
        Width: =156
        X: =2004
        ZIndex: =3

    Label1_23 As label:
        Color: =RGBA(255, 255, 255, 1)
        Font: =Font.Verdana
        Height: =134
        PaddingRight: =7.91
        PaddingTop: =7.91
        Size: =39.53
        Text: ="Welcome, " & User().FullName & "!"
        Width: =1315
        X: =184
        ZIndex: =4

    Image5_4 As image:
        Height: =1620
        Image: ='lg.rotating-squares-preloader-gif'
        PaddingRight: =0.00
        PaddingTop: =0.00
        Visible: =spinnerVar
        Width: =2160.00
        X: =0.00
        ZIndex: =5

    Image9_3 As image:
        Height: =1620
        Image: ='lg.rotating-squares-preloader-gif'
        Visible: =spinnerVar
        Width: =2160
        ZIndex: =6

    "GalleryOrders As gallery.'BrowseLayout_Vertical_TwoTextOneImageVariant_ver4.0'":
        BorderColor: =RGBA(255, 255, 255, 1)
        BorderThickness: =2
        Height: =1315
        Items: =SortByColumns(colMyRequests2, "DateNeeded", SortOrder.Descending)
        Layout: =Layout.Vertical
        ShowScrollbar: =false
        TemplateFill: |-
            =If(ThisItem.UID=GalleryOrders.Selected.UID,
            Color.DarkBlue, 
            RGBA(0,0,0,0)
            )
        TemplatePadding: =0
        TemplateSize: =209
        Width: =1226
        X: =49
        Y: =279
        ZIndex: =7

        Separator3 As rectangle:
            Fill: =RGBA(255, 255, 255, 1)
            Height: =1
            OnSelect: =Select(Parent)
            Width: =Parent.TemplateWidth
            Y: =Parent.TemplateHeight - 1
            ZIndex: =5

        Title3_4 As label:
            Align: =Align.Center
            Color: =RGBA(255, 255, 255, 1)
            Font: =Font.Verdana
            FontWeight: =FontWeight.Normal
            Height: =64
            OnSelect: =Select(Parent)
            PaddingBottom: =0
            PaddingLeft: =0
            PaddingRight: =0
            PaddingTop: =0
            Text: =ThisItem.Ranch
            VerticalAlign: =VerticalAlign.Top
            Width: =193
            X: =141
            Y: =48
            ZIndex: =9

        Title3_5 As label:
            Align: =Align.Center
            Color: =RGBA(255, 255, 255, 1)
            Font: =Font.Verdana
            FontWeight: =FontWeight.Normal
            Height: =56
            OnSelect: =Select(Parent)
            PaddingBottom: =0
            PaddingLeft: =0
            PaddingRight: =0
            PaddingTop: =0
            Size: =18
            Text: =First(Filter(RequestHeader, UID=ThisItem.UID)).DateNeeded & " " & First(Filter(RequestHeader, UID=ThisItem.UID)).TimeNeeded
            VerticalAlign: =VerticalAlign.Top
            Width: =277
            X: =319
            Y: =10
            ZIndex: =10

        Title3_8 As label:
            Height: =65
            OnSelect: =Select(Parent)
            PaddingBottom: =0
            PaddingLeft: =0
            PaddingRight: =0
            PaddingTop: =0
            Text: =First(Filter(RequestHeader, UID=ThisItem.UID)).DateCompleted & " " & First(Filter(RequestHeader, UID=ThisItem.UID)).TimeCompleted
            VerticalAlign: =VerticalAlign.Top
            Width: =267
            X: =1319
            Y: =24
            ZIndex: =13

        Title3_9 As label:
            Align: =Align.Center
            Color: =RGBA(255, 255, 255, 1)
            Font: =Font.Verdana
            FontWeight: =FontWeight.Normal
            Height: =44
            OnSelect: =Select(Parent)
            PaddingBottom: =0
            PaddingLeft: =0
            PaddingRight: =0
            PaddingTop: =0
            Size: =18
            Text: =ThisItem.Contact
            VerticalAlign: =VerticalAlign.Top
            Width: =193
            X: =141
            Y: =10
            ZIndex: =14

        Title3_11 As label:
            Align: =Align.Center
            Color: =RGBA(255, 255, 255, 1)
            Font: =Font.Verdana
            FontWeight: =FontWeight.Normal
            Height: =73
            OnSelect: =Select(Parent)
            PaddingBottom: =0
            PaddingLeft: =0
            PaddingRight: =0
            PaddingTop: =0
            Size: =18
            Text: =ThisItem.AcceptedBy
            VerticalAlign: =VerticalAlign.Top
            Width: =274
            X: =596
            Y: =10
            ZIndex: =16

        Title3_12 As label:
            Align: =Align.Center
            Color: =RGBA(255, 255, 255, 1)
            Font: =Font.Verdana
            FontWeight: =FontWeight.Normal
            Height: =81
            OnSelect: =Select(Parent)
            PaddingBottom: =0
            PaddingLeft: =0
            PaddingRight: =0
            PaddingTop: =0
            Size: =18
            Text: |-
                ="Received On
                " & 
                ThisItem.DateCompleted & " " & ThisItem.TimeCompleted
            VerticalAlign: =VerticalAlign.Top
            Width: =345
            X: =285
            Y: =54
            ZIndex: =17

        Title3_13 As label:
            Align: =Align.Center
            Color: |-
                =If(ThisItem.Status="Submitted", Color.White,
                If(ThisItem.Status="Accepted", Color.Yellow,
                If(ThisItem.Status="EnRoute", Color.Pink,
                If(ThisItem.Status="Delivered", Color.LightGreen,
                If(ThisItem.Status="Cancelled", Color.Red,
                Color.White
                )))))
            Font: =Font.Verdana
            FontWeight: =FontWeight.Normal
            Height: =73
            OnSelect: =Select(Parent)
            PaddingBottom: =0
            PaddingLeft: =0
            PaddingRight: =0
            PaddingTop: =0
            Size: =18
            Text: =ThisItem.Status
            VerticalAlign: =VerticalAlign.Top
            Width: =195
            X: =852
            Y: =10
            ZIndex: =18

        Button7 As button:
            BorderColor: =RGBA(184, 0, 0, 1)
            BorderThickness: =4
            Color: =RGBA(184, 0, 0, 1)
            Fill: =RGBA(0, 0, 0, 0)
            Font: =Font.Verdana
            Height: =94
            OnSelect: |
                =If(
                    Or(
                        ThisItem.Status="Submitted", ThisItem.Status="Accepted"), 
                        Set(cancelVar, true),
                        Notify("Cannot cancel an order that is En Route, Delivered, or already Cancelled. No se puede cancelar un pedido que está en camino, entregado o ya cancelado")
                )
            RadiusBottomLeft: =0
            RadiusBottomRight: =0
            RadiusTopLeft: =0
            RadiusTopRight: =0
            Text: =If(spanVar=false, "Cancel Request", "Cancellar Peticion")
            Width: =126
            X: =14
            Y: =18
            ZIndex: =19

        Button7_1 As button:
            BorderColor: =RGBA(255, 255, 255, 1)
            BorderThickness: =4
            Fill: =RGBA(0, 0, 0, 0)
            Font: =Font.Verdana
            Height: =176
            OnSelect: =Set(galleryvisVar, true)
            RadiusBottomLeft: =0
            RadiusBottomRight: =0
            RadiusTopLeft: =0
            RadiusTopRight: =0
            Text: =If(spanVar=false, "View Details", "Ver Detalles")
            X: =1047
            Y: =18
            ZIndex: =20

        Title3_14 As label:
            Color: =RGBA(255, 255, 255, 1)
            Font: =Font.Verdana
            FontWeight: =FontWeight.Normal
            Height: =72
            OnSelect: =Select(Parent)
            PaddingBottom: =0
            PaddingLeft: =0
            PaddingRight: =0
            PaddingTop: =0
            Size: =15
            Text: |-
                ="Notes: " & ThisItem.Notes
            VerticalAlign: =VerticalAlign.Top
            Width: =1014
            X: =14
            Y: =122
            ZIndex: =21

    Label5_3 As label:
        Align: =Align.Center
        Color: =RGBA(255, 255, 255, 1)
        Font: =Font.Verdana
        Size: =18
        Text: =If(spanVar=false, "Deliver To", "Dejar")
        X: =222
        Y: =230
        ZIndex: =8

    Label5_5 As label:
        Align: =Align.Center
        Color: =RGBA(255, 255, 255, 1)
        Font: =Font.Verdana
        Size: =18
        Text: =If(spanVar=false, "Due By", "Debido Por")
        X: =433
        Y: =230
        ZIndex: =9

    Label5_6 As label:
        Align: =Align.Center
        Color: =RGBA(255, 255, 255, 1)
        Font: =Font.Verdana
        Size: =18
        Text: =If(spanVar=false, "Status", "Estado")
        X: =922
        Y: =230
        ZIndex: =10

    Label5_7 As label:
        Align: =Align.Center
        Color: =RGBA(255, 255, 255, 1)
        Font: =Font.Verdana
        Size: =18
        Text: =If(spanVar=false, "Accepted By", "Aceptado Por")
        Width: =278
        X: =644
        Y: =230
        ZIndex: =11

    "GalleryItems As gallery.'BrowseLayout_Vertical_TwoTextOneImageVariant_ver4.0'":
        BorderColor: =RGBA(255, 255, 255, 1)
        BorderThickness: =2
        Height: =1317
        Items: =Filter(RequestItemsList, UID=GalleryOrders.Selected.UID)
        Layout: =Layout.Vertical
        ShowScrollbar: =false
        TemplateFill: |-
            =If(ThisItem.Status="Cancelled", Color.Red,
            If(ThisItem.Status="Completed", Color.DarkGreen,
            RGBA(0, 0, 0, 0)
            ))
        TemplatePadding: =0
        TemplateSize: =Min(160, Self.Height - 60)
        Visible: =galleryvisVar
        Width: =790
        X: =1319
        Y: =279
        ZIndex: =12

        Image14 As image:
            BorderColor: =RGBA(255, 255, 255, 1)
            BorderThickness: =2
            Height: =128
            Image: =First(Filter(RequestMaterials, Material=ThisItem.Material)).Thumbnail.Large
            OnSelect: =Select(Parent)
            Width: =128
            X: =16
            Y: =(Parent.TemplateHeight / 2) - (Self.Height / 2)
            ZIndex: =1

        Title4 As label:
            Align: =Align.Center
            Color: =RGBA(255, 255, 255, 1)
            Font: =Font.Verdana
            Height: =85
            OnSelect: =Select(Parent)
            PaddingBottom: =0
            PaddingLeft: =0
            PaddingRight: =0
            PaddingTop: =0
            Size: =15
            Text: =If(spanVar=false, ThisItem.Material, ThisItem.SpanishMaterial)
            VerticalAlign: =VerticalAlign.Top
            Width: =151
            X: =158
            Y: =16
            ZIndex: =2

        Subtitle2 As label:
            Align: =Align.Center
            Color: =RGBA(255, 255, 255, 1)
            Font: =Font.Verdana
            Height: =32
            OnSelect: =Select(Parent)
            PaddingBottom: =0
            PaddingLeft: =0
            PaddingRight: =0
            PaddingTop: =0
            Size: =15
            Text: =If(spanVar=false, ThisItem.TypeOfMaterial, ThisItem.SpanishType)
            VerticalAlign: =VerticalAlign.Top
            Width: =200
            X: =159
            Y: =112
            ZIndex: =3

        Separator4 As rectangle:
            Fill: =RGBA(255, 255, 255, 1)
            Height: =1
            OnSelect: =Select(Parent)
            Width: =Parent.TemplateWidth
            Y: =Parent.TemplateHeight - 1
            ZIndex: =5

        Title4_1 As label:
            Align: =Align.Center
            Color: =RGBA(255, 255, 255, 1)
            Font: =Font.Verdana
            Height: =53
            OnSelect: =Select(Parent)
            PaddingBottom: =0
            PaddingLeft: =0
            PaddingRight: =0
            PaddingTop: =0
            Text: =ThisItem.NumberAttained & "/" & ThisItem.HowMany
            VerticalAlign: =VerticalAlign.Top
            Width: =173
            X: =308
            Y: =16
            ZIndex: =6

        Button7_2 As button:
            BorderColor: =Color.DarkRed
            BorderThickness: =4
            Color: =RGBA(184, 0, 0, 1)
            Fill: =RGBA(0, 0, 0, 0)
            Font: =Font.Verdana
            Height: =106
            OnSelect: |-
                =If(
                    LookUp(RequestItemsList, UID=ThisItem.UID And Material=ThisItem.Material).NumberAttained=ThisItem.HowMany,
                    Notify("This request has already been fulfilled and cannot be altered. Esta solicitud ya se cumplió y no se puede modificar", NotificationType.Error),
                If(
                    Or(
                        First(
                        Filter(
                            colMyRequests2, UID=ThisItem.UID)).Status="Submitted",
                            First(
                        Filter(
                            colMyRequests2, UID=ThisItem.UID)).Status="Accepted"),
                Set(cancelVar2, true)
                )
                )
            RadiusBottomLeft: =0
            RadiusBottomRight: =0
            RadiusTopLeft: =0
            RadiusTopRight: =0
            Text: =If(spanVar=false, "Cancel Item", "Cancelar Articulo")
            Width: =127
            X: =648
            Y: =27
            ZIndex: =7

        Title4_2 As label:
            Align: =Align.Center
            Color: =RGBA(255, 255, 255, 1)
            Font: =Font.Verdana
            Height: =53
            OnSelect: =Select(Parent)
            PaddingBottom: =0
            PaddingLeft: =0
            PaddingRight: =0
            PaddingTop: =0
            Text: =ThisItem.Status
            VerticalAlign: =VerticalAlign.Top
            Width: =199
            X: =449
            Y: =16
            ZIndex: =8

        InputChange As text:
            Default: =""
            Format: =TextFormat.Number
            Height: =32
            HintText: |-
                ="New #"
            OnSelect: =Select(Parent)
            RadiusBottomLeft: =0
            RadiusBottomRight: =0
            RadiusTopLeft: =0
            RadiusTopRight: =0
            Width: =74
            X: =359
            Y: =101
            ZIndex: =9

        Button7_3 As button:
            BorderColor: =RGBA(153, 207, 236, 1)
            Color: =RGBA(153, 207, 236, 1)
            Fill: =RGBA(0, 0, 0, 0)
            Font: =Font.Verdana
            Height: =32
            OnSelect: |-
                =If(
                    LookUp(RequestItemsList, UID=ThisItem.UID And Material=ThisItem.Material).NumberAttained=ThisItem.HowMany,
                    Notify("This request has already been fulfilled and cannot be altered", NotificationType.Error),
                Patch(
                    RequestItemsList,
                    First(
                        Filter(
                            RequestItemsList, UID=ThisItem.UID, Material=ThisItem.Material)), {
                                HowMany: Value(InputChange.Text)
                            }
                );
                Refresh(HeaderMain);
                Refresh(RequestHeader);
                Refresh(RequestItemsList)
                )
            RadiusBottomLeft: =0
            RadiusBottomRight: =0
            RadiusTopLeft: =0
            RadiusTopRight: =0
            Text: =If(spanVar=false, "Update", "Actualizar")
            Width: =127
            X: =481
            Y: =101
            ZIndex: =10

    Label5_9 As label:
        Align: =Align.Center
        Color: =RGBA(255, 255, 255, 1)
        Font: =Font.Verdana
        Size: =20
        Text: =If(spanVar=false, "Status", "Estado")
        Visible: =galleryvisVar
        Width: =201
        X: =1760
        Y: =230
        ZIndex: =13

    Label5_10 As label:
        Align: =Align.Center
        Color: =RGBA(255, 255, 255, 1)
        Font: =Font.Verdana
        Size: =20
        Text: =If(spanVar=false, "Item", "Articulo")
        Visible: =galleryvisVar
        X: =1460
        Y: =230
        ZIndex: =14

    Label5_11 As label:
        Align: =Align.Center
        Color: =RGBA(255, 255, 255, 1)
        Font: =Font.Verdana
        Height: =45
        Size: =20
        Text: |-
            ="#"
        Visible: =galleryvisVar
        Width: =91
        X: =1668
        Y: =230
        ZIndex: =15

    Rectangle3 As rectangle:
        Fill: =RGBA(0, 0, 0, 1)
        Height: =1381
        Visible: =cancelVar
        Width: =2060
        X: =49
        Y: =213
        ZIndex: =16

    Label6 As label:
        Align: =Align.Center
        Color: =RGBA(255, 255, 255, 1)
        Font: =Font.Verdana
        Height: =346
        Size: =55
        Text: |-
            =If(spanVar=false, "Are you sure you want to cancel this request? This action cannot be undone",
            "¿Está seguro de que desea cancelar esta solicitud? Esta acción no se puede deshacer")
        Visible: =cancelVar
        Width: =1953
        X: =106
        Y: =200
        ZIndex: =17

    Button8 As button:
        BorderColor: =Color.White
        Fill: =RGBA(54, 176, 75, 1)
        Font: =Font.Verdana
        Height: =902
        OnSelect: =Set(cancelVar, false)
        RadiusBottomLeft: =0
        RadiusBottomRight: =0
        RadiusTopLeft: =0
        RadiusTopRight: =0
        Size: =55
        Text: =If(spanVar=false, "No, take me back", "No, llévame de vuelta")
        Visible: =cancelVar
        Width: =1408
        X: =106
        Y: =616
        ZIndex: =18

    Button8_1 As button:
        BorderColor: =Color.White
        Fill: =RGBA(184, 0, 0, 1)
        Font: =Font.Verdana
        Height: =903
        OnSelect: |-
            =Patch(RequestHeader, First(Filter(RequestHeader, UID=GalleryOrders.Selected.UID)), {Cancelled: true});
            Patch(HeaderMain, First(Filter(HeaderMain, ID=Value(GalleryOrders.Selected.UID))), {STATUS: "Cancelled"});
            Patch(RequestHeader, First(Filter(RequestHeader, UID=GalleryOrders.Selected.UID)), {Status: "Cancelled"});
            UpdateIf(RequestItemsList, UID=GalleryOrders.Selected.UID, {Status: "Cancelled"});
            
            Refresh(RequestHeader);
            Refresh(HeaderMain);
            
            ClearCollect(
                colMyRequests2,
                Filter(
                    RequestHeader, Submitter=User().FullName
                )
            );
            Set(cancelVar, false)
        RadiusBottomLeft: =0
        RadiusBottomRight: =0
        RadiusTopLeft: =0
        RadiusTopRight: =0
        Size: =55
        Text: =If(spanVar=false, "Yes, cancel this request", "¿Está seguro de que desea cancelar esta solicitud? Esta acción no se puede deshacer")
        Visible: =cancelVar
        Width: =437
        X: =1600
        Y: =616
        ZIndex: =19

    Rectangle4 As rectangle:
        Fill: =RGBA(0, 0, 0, 1)
        Height: =1364
        Visible: =cancelVar2
        Width: =2102
        X: =36
        Y: =232
        ZIndex: =20

    Label7 As label:
        Align: =Align.Center
        Color: =RGBA(255, 255, 255, 1)
        Font: =Font.Verdana
        Height: =399
        Size: =55
        Text: |-
            =If(spanVar=false,
            "Are you sure you want to cancel " & GalleryItems.Selected.Material & " x" & GalleryItems.Selected.HowMany & "?
            " &
            "This Action cannot be undone.",
            
            "¿Está seguro de que desea cancelar " & GalleryItems.Selected.SpanishMaterial & " x" & GalleryItems.Selected.HowMany & "?
            " &
            "Esta acción no se puede deshacer"
            )
        Visible: =cancelVar2
        Width: =1908
        X: =116
        Y: =279
        ZIndex: =21

    Button9 As button:
        BorderColor: =Color.White
        Fill: =RGBA(54, 176, 75, 1)
        Font: =Font.Verdana
        Height: =723
        OnSelect: =Set(cancelVar2, false)
        RadiusBottomLeft: =0
        RadiusBottomRight: =0
        RadiusTopLeft: =0
        RadiusTopRight: =0
        Size: =55
        Text: =If(spanVar=false, "No, take me back", "No, llévame de vuelta")
        Visible: =cancelVar2
        Width: =1158
        X: =106
        Y: =795
        ZIndex: =22

    Button9_1 As button:
        BorderColor: =Color.White
        Fill: =RGBA(184, 0, 0, 1)
        Font: =Font.Verdana
        Height: =723
        OnSelect: |-
            =
            Patch(RequestItemsList, First(Filter(RequestItemsList, UID=GalleryItems.Selected.UID, Material=GalleryItems.Selected.Material)), {
                Status: "Cancelled"
            }
            );
            Refresh(RequestItemsList);
            Set(cancelVar2, false)
        RadiusBottomLeft: =0
        RadiusBottomRight: =0
        RadiusTopLeft: =0
        RadiusTopRight: =0
        Size: =55
        Text: =If(spanVar=false, "Yes, cancel this item", "Sí, cancelar este artículo")
        Visible: =cancelVar2
        Width: =672
        X: =1352
        Y: =796
        ZIndex: =23

    Image6_2 As image:
        Height: =76
        Image: ='MicrosoftTeams-image (13)'
        Width: =98
        X: =49
        Y: =16
        ZIndex: =24

    Label3_1 As label:
        Align: =Align.Center
        Color: =RGBA(255, 255, 255, 1)
        Font: =Font.Verdana
        Height: =42
        Size: =20
        Text: ="Requests"
        Width: =161
        X: =23
        Y: =90
        ZIndex: =25

    Image3_5 As image:
        Height: =134
        Image: ='reload-1.1s-200px (1)'
        OnSelect: |-
            =Refresh(HeaderMain);
            Refresh(RequestHeader);
            Refresh(RequestItemsList);
            
            ClearCollect(
                colMyRequests2,
                Filter(
                    RequestHeader, Submitter=User().FullName
                )
            )
        PaddingRight: =0.00
        PaddingTop: =0.00
        Width: =129
        X: =1872
        ZIndex: =26

    Timer1 As timer:
        AutoStart: =true
        OnTimerEnd: |-
            =Refresh(HeaderMain);
            Refresh(RequestHeader);
            Refresh(RequestItemsList);
            
            ClearCollect(
                colMyRequests2,
                Filter(
                    RequestHeader, Submitter=User().FullName
                )
            )
        Repeat: =true
        Visible: =false
        X: =1213
        Y: =173
        ZIndex: =27

